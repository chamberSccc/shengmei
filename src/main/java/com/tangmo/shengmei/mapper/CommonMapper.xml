<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tangmo.shengmei.dao.CommonDao">

    <resultMap id="TypeResultMap" type="com.tangmo.shengmei.entity.GoodsType" >
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="value" property="value" jdbcType="TINYINT"/>
    </resultMap>

    <resultMap id="TypeItemResultMap" type="com.tangmo.shengmei.entity.GoodsTypeItem" >
        <id column="id" property="id" jdbcType="INTEGER"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="value" property="value" jdbcType="TINYINT"/>
        <result column="gt_id" property="gtId" jdbcType="TINYINT"/>
    </resultMap>

    <select id="selectGoodsType" resultMap="TypeResultMap">
        select id,name,value FROM goods_type
    </select>

    <select id="selectItemByType" resultMap="TypeItemResultMap">
        SELECT id,gt_id,name,value FROM goods_type_item WHERE gt_id = #{type}
    </select>

    <insert id="insertGoodsTypeItem" parameterType="com.tangmo.shengmei.entity.GoodsTypeItem">
        INSERT INTO goods_type_item (name,value,gt_id)
        VALUES (#{name},#{value},#{gtId]})
    </insert>

    <update id="updateGoodsTypeItem">
        UPDATE goods_type_item SET name = #{name}
        WHERE id = #{id}
    </update>

    <delete id="deleteGoodsTypeItem">
        DELETE FROM goods_type_item WHERE id = #{id}
    </delete>

    <select id="selectMaxItemValue" resultType="java.lang.Integer">
        SELECT ifnull(max(value),0) FROM goods_type_item WHERE gt_id = #{gtId}
    </select>



</mapper>